var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},a={},l=e.parcelRequire772a;null==l&&((l=function(e){if(e in t)return t[e].exports;if(e in a){var l=a[e];delete a[e];var s={id:e,exports:{}};return t[e]=s,l.call(s.exports,s,s.exports),s.exports}var n=Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(e,t){a[e]=t},e.parcelRequire772a=l);var s=l("j7Wwz"),n=l("h1zpV"),i=l("4IDor");const r=(0,n.default)();r.logOutBtn.addEventListener("click",function(){(0,i.default).show(),(0,s.default).logOut().then(()=>{setTimeout(()=>{(0,i.default).hide(),location.replace("/")},200)})});var o=l("6AR8M"),s=l("j7Wwz");class u{static createUser(e,t){let{uid:a,name:l,email:s,avatar:n}=t,i=localStorage.getItem(e),r=null!==i?JSON.parse(i):void 0;r&&r.uid===a||localStorage.setItem(e,JSON.stringify({uid:a,email:s,name:l??"User",avatar:n??"https://picsum.photos/200"}))}static getUser(e){let t=localStorage.getItem(e);return null!==t?JSON.parse(t):void 0}static saveUserAvatar(e,t){let a=localStorage.getItem(e),l=null!==a?JSON.parse(a):void 0;l.avatar=t,localStorage.setItem(e,JSON.stringify(l))}}var n=l("h1zpV");let c="";const d=(0,n.default)();function f(e){d.profileName.textContent=e.name,d.profileNick.textContent=e.email,e.avatar&&p(d.profileImg,e.avatar)}function p(e,t){e.style.backgroundImage=`url(${t})`}d.inputFile.addEventListener("change",function(){let e=new FileReader;e.addEventListener("load",()=>{let t=e.result;"string"==typeof t&&(u.saveUserAvatar(c,t),p(d.profileImg,t))}),e.readAsDataURL(this.files[0])}),(0,o.onAuthStateChanged)(s.auth,e=>{if(e){let{uid:t,displayName:a,email:l,photoURL:s}=e,n=u.getUser(t);if(c=t,n&&n.uid===t)f(n);else{u.createUser(e.uid,{uid:t,name:a,email:l,avatar:s});let n=u.getUser(t);f(n)}}});var o=l("6AR8M"),s=l("j7Wwz");function m(e,t){if(!e)return;let a=e.map(({id:e,value:t,isCompleted:a})=>`
        <li id=${e} class="task" >
          <label class="task__label">
            <input type="checkbox" ${a&&"checked"} />
            <span class="task__custom-check"></span>
            <span class="task__name">${t}</span>
            </label>
            <button class="delete-task-btn">&#x2715;</button>
        </li>
    `);t.innerHTML=a.join("")}var n=l("h1zpV");function v(e,t){try{let a=localStorage.getItem(t),l=null!==a?JSON.parse(a):{},s={...l,tasks:[...e]},n=JSON.stringify(s);if("null"==n||void 0===n)throw Error();localStorage.setItem(t,n)}catch(e){alert("LocalStorage set error! Value cannot be null | undefined")}}const g=(0,n.default)();let h="",k=[];(0,o.onAuthStateChanged)(s.auth,e=>{m(k=function(e){let t=localStorage.getItem(e),a=null!==t?JSON.parse(t):void 0;return a.tasks?a.tasks:[]}(h=e?.uid??""),g.tasksList)}),g.addTaskForm.addEventListener("submit",function(e){e.preventDefault();let t=g.taskInput.value.trim();if(!t||function(e,t){if(!e)return;let a=e.find(e=>e.value===t);return!!a}(k?.allTasks,t))return;let a={id:Date.now(),value:t,isCompleted:!1};k.unshift(a),m(k,g.tasksList),v(k,h),g.taskInput.value=""}),g.tasksList.addEventListener("click",function(e){var t,a,l;let s=e.target,n=s.classList.contains("task__custom-check"),i=s.classList.contains("task__name");if(n||i){let e=+s.closest("li").id;(function(e,t){e.forEach(e=>{e.id===t&&(e.isCompleted=!e.isCompleted)})})(k,e),t=k,t.sort((e,t)=>{let a=e.isCompleted?1:-1,l=t.isCompleted?1:-1;return a-l}),document.querySelectorAll(".task").forEach(e=>{e.addEventListener("transitionend",()=>{let e=setTimeout(()=>{m(k,g.tasksList),v(k,h),clearTimeout(e)},100)})}),v(k,h)}else if(s.classList.contains("delete-task-btn")){let e=s.closest("li");a=k,l=+e.id,e.remove(),a.forEach((e,t)=>{e.id===l&&a.splice(t,1)}),v(k,h)}});
//# sourceMappingURL=profile.e68e95e6.js.map
